import{r as n,j as l,P as f,a as u}from"./vendor-DcNpWB9l.js";import{c as m}from"./grasp-guide-uufW42zv.js";const h=n.forwardRef(({className:a,type:i,...t},e)=>l.jsx("input",{type:i,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:e,...t}));h.displayName="Input";var _="Label",p=n.forwardRef((a,i)=>l.jsx(f.label,{...a,ref:i,onMouseDown:t=>{var o;t.target.closest("button, input, select, textarea")||((o=a.onMouseDown)==null||o.call(a,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));p.displayName=_;var y=p;const b=u("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),D=n.forwardRef(({className:a,...i},t)=>l.jsx(y,{ref:t,className:m(b(),a),...i}));D.displayName=y.displayName;const c=async a=>{var r,d;const i=await a.json().catch(async()=>({message:await a.text().catch(()=>"")||"Failed to create payment link"})),t=i.error_code||"UNKNOWN_ERROR",e=((r=i.details)==null?void 0:r.join(", "))||"",o=i.message||((d=i.error)==null?void 0:d.message)||"Failed to create payment link";let s=o;throw t==="MIDTRANS_AUTH_FAILED"||a.status===401?s="Payment gateway authentication failed. Please try again later or contact support.":t==="MIDTRANS_NOT_CONFIGURED"?s="Payment system is temporarily unavailable. Please contact support.":t==="INVALID_REQUEST"?s="Invalid payment request. Please check your information and try again.":a.status===500?s="Server error occurred. Please try again later.":a.status>=400&&a.status<500&&(s="Invalid request. Please check your information and try again."),console.error("Payment creation failed:",{status:a.status,errorCode:t,message:o,details:e}),new Error(s)},N=async a=>{const i=a.price+a.shippingCost,t={transaction_details:{order_id:`BOOK-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,gross_amount:i},item_details:[{id:a.bookId,price:a.price,quantity:1,name:a.bookTitle},{id:"shipping",price:a.shippingCost,quantity:1,name:"Ongkir"}],customer_details:{first_name:a.customerDetails.firstName,last_name:a.customerDetails.lastName,email:a.customerDetails.email,phone:a.customerDetails.phone,billing_address:{first_name:a.customerDetails.firstName,last_name:a.customerDetails.lastName,phone:a.customerDetails.phone,address:a.customerDetails.address,city:a.customerDetails.city,postal_code:a.customerDetails.postalCode,country_code:"IDN"},shipping_address:{first_name:a.customerDetails.firstName,last_name:a.customerDetails.lastName,phone:a.customerDetails.phone,address:a.customerDetails.address,city:a.customerDetails.city,postal_code:a.customerDetails.postalCode,country_code:"IDN"}}};try{const s=await fetch("https://api.artstudionala.com/api/midtrans/create-payment-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});s.ok||await c(s);const r=await s.json();return{paymentUrl:r.payment_url||r.snap_url||r.redirect_url,orderId:r.order_id||t.transaction_details.order_id,token:r.token}}catch(e){throw console.error("Midtrans payment link creation error:",e),e}},U=async a=>{const t={transaction_details:{order_id:`BELAJAR-${Date.now()}-${Math.random().toString(36).substr(2,6).toUpperCase()}`,gross_amount:a.price},item_details:[{id:a.classId,price:a.price,quantity:1,name:a.className}],customer_details:{first_name:a.customerDetails.firstName,last_name:a.customerDetails.lastName,email:a.customerDetails.email,phone:a.customerDetails.phone,billing_address:a.additionalDetails?{first_name:a.additionalDetails.childName,address:a.additionalDetails.domicileAddress,phone:a.additionalDetails.parentWhatsapp,country_code:"IDN"}:void 0},custom_field1:a.additionalDetails?`Anak: ${a.additionalDetails.childName} (${a.additionalDetails.childDob})`:"",custom_field2:a.additionalDetails?`IG: ${a.additionalDetails.socialMediaUsername} | WA: ${a.additionalDetails.parentWhatsapp}`:"",custom_field3:a.additionalDetails?`Kelas: ${a.className} | Hari: ${a.additionalDetails.classDay}`:""};try{const s=await fetch("https://api.artstudionala.com/api/midtrans/create-payment-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});s.ok||await c(s);const r=await s.json();return{paymentUrl:r.payment_url||r.snap_url||r.redirect_url,orderId:r.order_id||t.transaction_details.order_id,token:r.token}}catch(e){throw console.error("Midtrans class payment link creation error:",e),e}},x=async a=>{const i={transaction_details:{order_id:`SKET-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,gross_amount:a.price},item_details:[{id:a.sketchId,price:a.price,quantity:1,name:a.sketchTitle}],customer_details:{first_name:a.customerDetails.firstName,last_name:a.customerDetails.lastName,email:a.customerDetails.email,phone:a.customerDetails.phone}};try{const o=await fetch("https://api.artstudionala.com/api/midtrans/create-payment-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});o.ok||await c(o);const s=await o.json();return{paymentUrl:s.payment_url||s.snap_url||s.redirect_url,orderId:s.order_id||i.transaction_details.order_id,token:s.token}}catch(t){throw console.error("Midtrans sketch payment link creation error:",t),t}},T=async a=>{const e=await fetch("https://api.artstudionala.com/api/grasp-guide/access-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){const o=await e.json().catch(async()=>({message:await e.text().catch(()=>"")||"Failed to save access code"}));throw new Error(o.message||"Failed to save access code")}return e.json()},I=async a=>{const e=await fetch("https://api.artstudionala.com/api/grasp-guide/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:a})});if(!e.ok){const o=await e.json().catch(async()=>({message:await e.text().catch(()=>"")||"Failed to verify code"}));throw new Error(o.message||"Failed to verify code")}return e.json()};export{h as I,D as L,x as a,N as b,U as c,T as s,I as v};
