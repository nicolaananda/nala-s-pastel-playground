import{r as n,j as c,P as u,a as f}from"./vendor-DcNpWB9l.js";import{c as m}from"./grasp-guide-uufW42zv.js";const h=n.forwardRef(({className:a,type:s,...t},r)=>c.jsx("input",{type:s,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:r,...t}));h.displayName="Input";var _="Label",p=n.forwardRef((a,s)=>c.jsx(u.label,{...a,ref:s,onMouseDown:t=>{var o;t.target.closest("button, input, select, textarea")||((o=a.onMouseDown)==null||o.call(a,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));p.displayName=_;var y=p;const b=f("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),g=n.forwardRef(({className:a,...s},t)=>c.jsx(y,{ref:t,className:m(b(),a),...s}));g.displayName=y.displayName;const l=async a=>{var i,d;const s=await a.json().catch(async()=>({message:await a.text().catch(()=>"")||"Failed to create payment link"})),t=s.error_code||"UNKNOWN_ERROR",r=((i=s.details)==null?void 0:i.join(", "))||"",o=s.message||((d=s.error)==null?void 0:d.message)||"Failed to create payment link";let e=o;throw t==="MIDTRANS_AUTH_FAILED"||a.status===401?e="Payment gateway authentication failed. Please try again later or contact support.":t==="MIDTRANS_NOT_CONFIGURED"?e="Payment system is temporarily unavailable. Please contact support.":t==="INVALID_REQUEST"?e="Invalid payment request. Please check your information and try again.":a.status===500?e="Server error occurred. Please try again later.":a.status>=400&&a.status<500&&(e="Invalid request. Please check your information and try again."),console.error("Payment creation failed:",{status:a.status,errorCode:t,message:o,details:r}),new Error(e)},N=async a=>{const s=a.price+a.shippingCost,t={transaction_details:{order_id:`BOOK-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,gross_amount:s},item_details:[{id:a.bookId,price:a.price,quantity:1,name:a.bookTitle},{id:"shipping",price:a.shippingCost,quantity:1,name:"Ongkir"}],customer_details:{first_name:a.customerDetails.firstName,last_name:a.customerDetails.lastName,email:a.customerDetails.email,phone:a.customerDetails.phone,billing_address:{first_name:a.customerDetails.firstName,last_name:a.customerDetails.lastName,phone:a.customerDetails.phone,address:a.customerDetails.address,city:a.customerDetails.city,postal_code:a.customerDetails.postalCode,country_code:"IDN"},shipping_address:{first_name:a.customerDetails.firstName,last_name:a.customerDetails.lastName,phone:a.customerDetails.phone,address:a.customerDetails.address,city:a.customerDetails.city,postal_code:a.customerDetails.postalCode,country_code:"IDN"}}};try{const e=await fetch("https://api.artstudionala.com/api/midtrans/create-payment-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});e.ok||await l(e);const i=await e.json();return{paymentUrl:i.payment_url||i.snap_url||i.redirect_url,orderId:i.order_id||t.transaction_details.order_id,token:i.token}}catch(r){throw console.error("Midtrans payment link creation error:",r),r}},U=async a=>{const s={transaction_details:{order_id:`CLASS-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,gross_amount:a.price},item_details:[{id:a.classId,price:a.price,quantity:1,name:a.className}],customer_details:{first_name:a.customerDetails.firstName,last_name:a.customerDetails.lastName,email:a.customerDetails.email,phone:a.customerDetails.phone}};try{const o=await fetch("https://api.artstudionala.com/api/midtrans/create-payment-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});o.ok||await l(o);const e=await o.json();return{paymentUrl:e.payment_url||e.snap_url||e.redirect_url,orderId:e.order_id||s.transaction_details.order_id,token:e.token}}catch(t){throw console.error("Midtrans class payment link creation error:",t),t}},x=async a=>{const s={transaction_details:{order_id:`SKET-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,gross_amount:a.price},item_details:[{id:a.sketchId,price:a.price,quantity:1,name:a.sketchTitle}],customer_details:{first_name:a.customerDetails.firstName,last_name:a.customerDetails.lastName,email:a.customerDetails.email,phone:a.customerDetails.phone}};try{const o=await fetch("https://api.artstudionala.com/api/midtrans/create-payment-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});o.ok||await l(o);const e=await o.json();return{paymentUrl:e.payment_url||e.snap_url||e.redirect_url,orderId:e.order_id||s.transaction_details.order_id,token:e.token}}catch(t){throw console.error("Midtrans sketch payment link creation error:",t),t}},T=async a=>{const r=await fetch("https://api.artstudionala.com/api/grasp-guide/access-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){const o=await r.json().catch(async()=>({message:await r.text().catch(()=>"")||"Failed to save access code"}));throw new Error(o.message||"Failed to save access code")}return r.json()},S=async a=>{const r=await fetch("https://api.artstudionala.com/api/grasp-guide/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:a})});if(!r.ok){const o=await r.json().catch(async()=>({message:await r.text().catch(()=>"")||"Failed to verify code"}));throw new Error(o.message||"Failed to verify code")}return r.json()};export{h as I,g as L,x as a,N as b,U as c,T as s,S as v};
